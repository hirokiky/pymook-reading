======================================================================================
 第1回 - 第1章 よくわかるPythonの世界、これだけは知っておきたいPython言語はじめの一歩
======================================================================================

.. contents:: 目次
   :local:

はじめに
========
鈴木たかのりです。

この連載では `Pythonエンジニア養成読本 <http://gihyo.jp/book/2015/978-4-7741-7320-7>`_
という書籍の `読書会イベント <http://pymook.connpass.com/>`_ についてレポートします。
この書籍は「他のプログラミング言語は知っていて、これからPythonを始める方」を対象として、私を含め6人のPythonista(Pythonを使う人)で執筆し、4月17日に技術評論社から発売されました。

読書会では書籍と同様に、Pythonの初心者の方を対象としています。
また、書籍を持っていなくても理解できるような内容にしています(書籍を持っていればより理解が深まると思いますが)。

私が、この読書会を始めようと思った動機としては、単純にこの本を読んだ人はどんな人たちで、どんな感想を持っているのか知りたいということがありました。そして、どの部分を疑問と思ったのかを知りたいと思ったということもあります。

読書会の進め方
==============
`第1回の読書会 <http://pymook.connpass.com/event/14008/>`_ は5月21日(木)に `アライドアーキテクツ株式会社 <http://www.aainc.co.jp/>`_ の会議室で開催されました。
今後月1回のペースででそれぞれの章の筆者が中心となって読書会を進めていく予定です。

当日は以下のタイムテーブルで進めました。

- 19:00-19:10 参加者の自己紹介
- 19:10-19:40 「第1章 よくわかるPythonの世界」
- 19:10-21:10 「第2章 これだけは知っておきたいPython言語はじめの一歩」
- 21:10-22:00 ビアバッシュ(ビールとピザでの参加者懇親会)

一般的な読書会では「書籍の内容をみんなで読み解く」といった形式が多いと思います。
しかし、この読書会では内容の読みあわせは行わず、書籍に付加した内容を話したり、参加者の持っている疑問点などをぶつけてもらって、みんなで議論して進めていこうと思っています(参加者のみなさんに活発に意見を言ってもらうのは難しかったりしますが)。

この形式は私の発案ではなく、以前参加していた
`エキスパートPythonプログラミング読書会 第二期 <http://connpass.com/series/31/>`_
の進め方を参考にしています。
ビアバッシュのときにLTを盛り込むところも参考にさせてもらいました(丸パクリしました)。

自己紹介
========
最初に私も含めて参加者全体の自己紹介を行いました。
全部で16名の方が参加してくださいました。

参加者の傾向としては、やはり「仕事でPythonを使っています」という人はほとんどおらず、「これからPythonをやろうと思っている」「普段はPHP、Javaで開発をしている」という方が多かったように思います。
業界もネットワーク系、Androidの開発、Webエンジニア、研究者、営業、マーケティング等いろいろな方がいて、普段私が参加する開発系のイベントとは異なる人達が多くて、なかなか興味深かったです。

印象的だった自己紹介の発言としては「普段はPHPで開発をしているが、Pythonのソースを見てきれいなので、これだ!と思った」という方や、
「 `集合知プログラミング <http://www.oreilly.co.jp/books/9784873113647/>`_ の内容をやってみたい」という方がいました。

第1章 よくわかるPythonの世界
============================
第1章は私の担当です。この章ではPythonのプログラミングについてはほとんど書いていませんが、プログラミング言語Pythonをより深く知るためのネタ的な内容が書いてあります。読書会ではその内容をさらっと紹介しつつ、質疑応答を行いました。

1-1 Pythonの特徴
----------------
この節ではプログラミング言語Pythonの特徴的なポイントについて解説しました。

そもそもPythonという名前なので、ロゴマークなどには「ヘビ」をモチーフとした物が多いです。しかし、その名前は実はイギリスのコメディグループ「モンティ・パイソン」からとられています。

また、自己紹介のところで「きれいなコードだと思った」と発言された方がいますが、そのあたりはPythonのコードがインデントでブロック構造を示すことや、言語設計として「誰が書いても同じようなコードになる」という方向性であることが大本にあるという解説をしました。
書籍の中でも下記のサンプルコードで説明しています。forループやif分の範囲をendというキーワードや閉じカッコで終了していないことがポイントです。

.. code-block:: python
   :caption: Pythonではブロック構造をインデントで表します
   
   for i in range(10):
       if i % 5 == 0:
           print 'ham'
       elif i % 3 == 0:
           print 'eggs'
       else:
           print 'spam'

また、個人的な意見ですが「Pythonを使っている人は規約をきちんと決める人が多い印象がある」という話をしました。
これはPythonの拡張機能を決めるための `PEP(Python Enhancement Proposal：Python拡張の提案) <https://www.python.org/dev/peps/pep-0001/>`_
というルールが存在していることもPythonらしさの表れだと考えています。

また、Pythonらしさを表す文章としてこの節では
`The Zen of Python <https://www.python.org/dev/peps/pep-0020/>`_
という格言についても簡単に説明しました。この格言は
Pythonインタープリタで ``import this`` と入力すると表示されます。
手元に Python の実行環境がある人は(最近のLinux, Macなどは最初から入っています)試してみてください。
また、このimport thisのソースコードには格言の内容がそのままは格納されていませんという話もしました。
`import thisのソースコード <https://github.com/python/cpython/blob/master/Lib/this.py>`_ はこんな感じで暗号化(といっていいんでしょうか)されています。興味のある方は、どのようになっているのか読みといてみてください。

Pythonには標準のもの以外にいくつかの処理系があるという話をしました。
ここで「PyPyは最近どうなのか?」という質問が出ました。
`PyPy <http://pypy.org/>`_ はPythonで実装されたPythonです(正確に言うとRPythonという制約を加えたPythonで実装されています)。
PyPyは当初は実験的な実装という位置づけでしたがが、現在は XXXX となっておりJIT(Just-in-Time)コンパイラのおかげでPythonよりも高速に動作する場合もあります。
XXXX ではPyPy を使っているという話もありました。

他にもJava仮想マシン(JVM)で動作する
`Jython <http://www.jython.org/>`_ や
.NET Framework上で動作する `IronPython <http://ironpython.net/>`_ などがあり、
それらのオブジェクトをPythonから操作したいなどの場合には有効に使えるという話もしました。

1-2 その歴史とバージョン選定のポイント
--------------------------------------
この節ではPythonのリリースバージョンについてと後半ではどのバージョンを使うべきかについての解説を行いました。

現在アクティブなバージョンはPython 2系(最新は2.7.9)とPython 3系(最新は3.4.3)です。
Python 3系はPython 2系とは一部の互換性を排しており、Pythonエンジニア養成読本では例として以下の4つの違いについて解説しています。

- printが文から関数に変更
- 文字列がUnicode文字列に統一
- 整数同士の割り算結果が実数に変更
- 標準ライブラリの再構成

とくに「文字列がUnicode文字列に統一」については日本人にとって影響は大きいと思います。Python 2系では日本語のencode/decodeなどでエラーが発生することがよくあるので、新規にコードを作成するのであればPython 3系を使用することをおすすめします。
しかし、この書籍では「すでに存在するプロジェクトに入る人」をターゲットと考えたので、Python 2系で解説をしています。
とはいえ、多くの部分は違いにさえ気をつければ、Python 3系でも役に立つ内容が多いと思います。

ここで「Mac OS Xを使っているが、Python 2系と3系の両方をインストールするにはどうしたらよいのか」という質問がありました。
基本的にインストールして上書きされることはないので、Mac であればインストーラーで両方インストールしてもいいですし、brew でもそれぞれインストールすることが可能です。
また、Linuxの場合は2章で説明する「インストール時にprefixをつける」ことによって、複数バージョンのPythonをインストール可能であるという解説もありました。

.. code-block:: sh
   :caption: brew でPython 2系と3系をインストール

   $ brew install python	     
   $ brew install python3
   $ /usr/local/bin/python2 -V
   Python 2.7.9
   $ /usr/local/bin/python -V
   Python 2.7.9
   $ /usr/local/bin/python3 -V
   Python 3.4.2

他の質問で「現在Python 2系のコードが有り、Python 3系に移行する場合はどうすべきか」という質問がありました。
これは、そのプロジェクトを今後どうしていくかにもよるのです。
長く続くのであればPython 2系はサポートが切れるので3系に移行すべきですが、そうでないのであれば移行のためのコストが持てるのかどうかにも係るという回答をしました。

また、Python 2系のコードを3系に対応させる
`2to3 <http://docs.python.jp/2.7/library/2to3.html>`_ というがツールがありますが、最近は周りではあまり使われていないという話をしました。
どちからというと `six <https://pypi.python.org/pypi/six>`_ というパッケージを利用し、Python 2系に3系の機能をとりこみ、一つのコードで2系と3系で動作するようにする方がおすすめであるという話をしました。

また、開発環境として何を使っているかという質問がありました。すでにEmacs、Vim等のエディタを使っている場合はそのままでよいと思いますが、
とくにないのであれば `PyCharm <https://www.jetbrains.com/pycharm/>`_ というPython用のIDEを使うのがおすすめという回答をしました。

1-3 Pythonのコミュニティ
------------------------
この節ではせっかくPythonを使うのであれば、一人で勉強するよりも人と知り合ったほうがよいと考え、コミュニティについて紹介しています。

前半では `PyCon(Python Conference) <http://www.pycon.org/>`_ について紹介しています。PyConは名前の通り、プログラミング言語Pythonのための国際カンファレンスです。
日本では `PyCon JP <http://www.pycon.jp>`_ が開催されていますが、他にも世界各国でPyConが開催されており、私も今年は台湾で開催される
`PyCon APAC <https://tw.pycon.org/2015apac/en/>`_ に参加予定であるという話もしました。

後半では日本にあるPythonコミュニティについて紹介しました。
PythonコミュニティにはPythonベースのツールやライブラリに関するコミュニティや、集まって開発をする「もくもく会」的なコミュニティがあるという話をしました。
Pythonコミュニティの探し方については、記事後半の「ビアバッシュ」のところで紹介します。

また、今回の読書会参加者は(全員男性のため)関係ありませんが、
`PyLadies Tokyo <http://pyladies-tokyo.connpass.com/>`_ というコミュニティも紹介しました。

第2章 これだけは知っておきたいPython言語はじめの一歩
====================================================
第2章の内容に入る前に、最初に著者の清原弘貴(`@hirokiky <https://twitter.com/hirokiky>`_)から改めて自己紹介がありました(私も別途自己紹介すればよかったと思いました)。

また、1章で話題にあがったPyCharmを普段使用しているので、実際にPyCharmの使いやすい部分についての紹介がありました。
PyCharmには機能が一部制限されている **Community Edition ** があるので、まずはそのバージョンを使ってみるとよいという話がありました。
なお、有料の **Professional Edition** は99ドルです。

2章の導入として、このショウはどういったあたりを狙っているのかという

2-1 Pythonをはじめよう
----------------------
最初にこの章全体の内容は

Pythonには
`Python チュートリアル <http://docs.python.jp/2/tutorial/>`_
という非常に優れたチュートリアルのドキュメントがあります。
ただ、少し内容が長いということと、最初は「ここまでは知らなくてもいいのでは」という内容も含まれているという印象です。
そのため、この章ではPythonチュートリアルから内容を削って「これだけは知っておいてほしい」という内容を入れたという話がありました。

なお、Pythonチュートリアルは易しくはないですがとてもよいドキュメントですので、Pythonをはじめようと思っている方はぜひ読んでみてください。
他の導入向け書籍については
`Pythonスタートブック <http://gihyo.jp/book/2010/978-4-7741-4229-6>`_ はプログラミングを知らない人も含めて導入にはとてよよい本だが、クラスを書くところまではいかない、
`初めてのPython <http://www.oreilly.co.jp/books/9784873113937/>`_ はいい本だが808ページと分厚いという話がありました。

また自己紹介であった「集合知プログラミング」については、Pythonの書き方がきれいではないという説明がありました。

この節ではPythonのインストールから、対話モードの実行、 `FizzBuzz <http://ja.wikipedia.org/wiki/Fizz_Buzz>`_ をサンプルに簡単なプログラムを作成するところまでを詳細に解説しました。

最終的には以下のようなコードが作成される中で、下記の要素について解説しました。

- 文字列
- 関数の定義(def)
- 組み込み関数(range, str)の使用
- for文
- if文
- 比較演算子(==)

.. code-block:: python
   :caption: fizzbuzz.py

   def fizzbuzz(num):
       if num % 3 == 0 and num % 5 == 0:
           return 'FizzBuzz'
       elif num % 3 == 0:
           return 'Fizz'
       elif num % 5 == 0:
           return 'Buzz'
       else:
           return str(num)

   for num in range(1, 101):
       print fizzbuzz(num)

また、プログラミングの練習問題として
`Project Euler <https://projecteuler.net/>`_
がおすすめであるという話がありました。
さまざまな数学に関する問題が提供されています。
`日本語の解説 <http://odz.sakura.ne.jp/projecteuler/>`_ もあるので、英語の問題が読めない人でも安心です。

2-2 Pythonのデータ型［基本編］
------------------------------

2-3 Pythonのデータ型［コレクション編］
--------------------------------------

2-4 ファイル操作とモジュール
----------------------------

- rangeは101で100なのか。rangeのソースがみたい→PyCharmでとんだら見れなかったw
- range(start, end, step)を書けるよ

- 文字列とか型についてざっと説明
- スライス
- encode, decodeでなぜこうなるの?→書籍の都合で「日」の部分だけをdecodeしている
  - unicode文字をそのまま表示してくれないので print 文を使っている
  - python 3だと日本語が表示される
  - PEPがあって、いしもとさんが書いた(あとでリンクしよう)
- 型推論とかは?
  - annotationはPython 2にはない
  - Python 3.5だとできるようになる?
  - docstringに

- collection
  - リスト内包表記だときれいにかけるよ
- tupleはimmutableだよ
- 辞書は順番がないよ  
- Setは順番は持っていない。同じ値が入らない
- リスト内包表記って→実行が速い
  - 複雑になるなら書かない方がいい
- データが多い時どうする?
  - 集合を使うと容量は少なく、inも速い
  - もっと多いならredisとかミドルウェアを使う  
- importでよみだせるよ
  - 標準ライブラリがたくさんあるよ→便利なものを知っておくと便利
- import でメソッド内で読むのはどう?
  - おすすめしない。なにに依存しているのか見難くなる
- pyoファイルがうざい→モジュール分割したほうがいいので気にしない
  - パフォーマンスもあるので、しょうがない
  - 別の場所においたりできるといいな→たしかに
- getでdefaultを指定するのがおすすめ
    
ビアバッシュ(懇親会)
====================
読書会の終了後ビールとピザで懇親会(ビアバッシュ)を行いました。

- http://connpass.com/category/Python/
- http://pyconjp.blogspot.jp/2015/04/python-event-201505.html
- http://connpass.com/event/14076/
- http://www.amazon.co.jp/s/ref=nb_sb_noss?__mk_ja_JP=%E3%82%AB%E3%82%BF%E3%82%AB%E3%83%8A&url=search-alias%3Daps&field-keywords=%E3%82%A8%E3%83%B3%E3%82%B8%E3%83%8B%E3%82%A2%E9%A4%8A%E6%88%90%E8%AA%AD%E6%9C%AC

まとめ
======
